<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
  <meta charset="UTF-8">
  <title>Trang ch·ªß</title>
  <style>
    .welcome { background: linear-gradient(135deg, #2563eb, #1d4ed8); border-radius: 16px; color: #fff; }
    .quick-card { border:0; border-radius: 16px; box-shadow: 0 10px 30px rgba(15,23,42,.08);}
    .quick-card:hover { transform: translateY(-2px); transition: .2s ease; }
  </style>
</head>
<body>
<section layout:fragment="content">
  <!-- Welcome -->
  <div class="welcome p-4 mb-4">
    <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
      <div>
        <div class="h4 mb-1">Ch√†o m·ª´ng b·∫°n quay l·∫°i! üëã</div>
        <div class="opacity-75">Kh√°m ph√° s·∫£n ph·∫©m, duy·ªát danh m·ª•c, t√¨m nhanh n·ªôi dung b·∫°n c·∫ßn.</div>
      </div>
      <form class="d-flex" th:action="@{/user/products}" method="get" style="max-width: 420px; width:100%">
        <input class="form-control form-control-lg me-2" type="text" name="q" placeholder="T√¨m s·∫£n ph·∫©m...">
        <button class="btn btn-light btn-lg" type="submit"><i class="bi bi-search"></i></button>
      </form>
    </div>
  </div>

  <!-- Quick actions -->
  <div class="row g-3 mb-4">
    <div class="col-12 col-md-4">
      <a class="card quick-card p-3 text-decoration-none text-body" th:href="@{/user/products}">
        <div class="d-flex align-items-center gap-3">
          <div class="kpi-icon"><i class="bi bi-box-seam"></i></div>
          <div>
            <div class="fw-semibold">Duy·ªát s·∫£n ph·∫©m</div>
            <div class="text-muted small">T√¨m, l·ªçc v√† ph√¢n trang</div>
          </div>
          <div class="ms-auto text-muted"><i class="bi bi-arrow-right"></i></div>
        </div>
      </a>
    </div>
    <div class="col-12 col-md-4">
      <a class="card quick-card p-3 text-decoration-none text-body" th:href="@{/user/categories}">
        <div class="d-flex align-items-center gap-3">
          <div class="kpi-icon"><i class="bi bi-card-list"></i></div>
          <div>
            <div class="fw-semibold">Xem danh m·ª•c</div>
            <div class="text-muted small">C√°c nh√≥m s·∫£n ph·∫©m</div>
          </div>
          <div class="ms-auto text-muted"><i class="bi bi-arrow-right"></i></div>
        </div>
      </a>
    </div>
    <div class="col-12 col-md-4">
      <a class="card quick-card p-3 text-decoration-none text-body" th:href="@{/user/products?q=hot}">
        <div class="d-flex align-items-center gap-3">
          <div class="kpi-icon"><i class="bi bi-fire"></i></div>
          <div>
            <div class="fw-semibold">Xu h∆∞·ªõng</div>
            <div class="text-muted small">S·∫£n ph·∫©m n·ªïi b·∫≠t g·∫ßn ƒë√¢y</div>
          </div>
          <div class="ms-auto text-muted"><i class="bi bi-arrow-right"></i></div>
        </div>
      </a>
    </div>
  </div>

  <!-- 2 c·ªôt: s·∫£n ph·∫©m m·ªõi + danh m·ª•c g·ª£i √Ω -->
  <div class="row g-3">
    <div class="col-12 col-lg-7">
      <div class="card soft-card">
        <div class="card-header bg-white"><strong>S·∫£n ph·∫©m m·ªõi</strong></div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th style="width:90px">ID</th>
                  <th>Ti√™u ƒë·ªÅ</th>
                  <th class="text-end" style="width:120px">S·ªë l∆∞·ª£ng</th>
                  <th class="text-end" style="width:140px">Gi√°</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="p : ${recentProducts}">
                  <td th:text="${p.id}">1</td>
                  <td><a th:href="@{/user/products(q=${p.title})}" th:text="${p.title}">Ti√™u ƒë·ªÅ</a></td>
                  <td class="text-end" th:text="${p.quantity}">0</td>
                  <td class="text-end"
                      th:text="${#numbers.formatDecimal(p.price, 0, 'COMMA', 0, 'POINT')}">0</td>
                </tr>
                <tr th:if="${#lists.isEmpty(recentProducts)}">
                  <td colspan="4" class="text-center text-muted p-3">Ch∆∞a c√≥ d·ªØ li·ªáu</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card-footer bg-white text-end">
          <a class="btn btn-sm btn-outline-secondary" th:href="@{/user/products}">T·∫•t c·∫£ s·∫£n ph·∫©m</a>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-5">
      <div class="card soft-card h-100">
        <div class="card-header bg-white"><strong>Danh m·ª•c g·ª£i √Ω</strong></div>
        <div class="card-body">
          <div class="row g-2" th:if="${!#lists.isEmpty(hotCategories)}">
            <div class="col-12" th:each="c : ${hotCategories}">
              <a class="d-flex align-items-center p-2 border rounded text-decoration-none text-body"
                 th:href="@{/user/products(categoryId=${c.id})}">
                <div class="flex-grow-1">
                  <div class="fw-semibold" th:text="${c.name}">T√™n</div>
                  <div class="small text-muted" th:text="${#lists.size(c.products)} + ' s·∫£n ph·∫©m'">0 s·∫£n ph·∫©m</div>
                </div>
                <i class="bi bi-chevron-right text-muted"></i>
              </a>
            </div>
          </div>
          <div class="text-center text-muted" th:if="${#lists.isEmpty(hotCategories)}">
            Ch∆∞a c√≥ d·ªØ li·ªáu
          </div>
        </div>
        <div class="card-footer bg-white text-end">
          <a class="btn btn-sm btn-outline-secondary" th:href="@{/user/categories}">T·∫•t c·∫£ danh m·ª•c</a>
        </div>
      </div>
    </div>
  </div>
</section>
</body>
</html>
